"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
// modules/contact/contact.routes.ts
const express_1 = __importDefault(require("express"));
const contact_controller_1 = require("./contact.controller");
const authMiddleware_1 = require("../../../common/middleware/authMiddleware");
const roleMiddleware_1 = require("../../../common/middleware/roleMiddleware");
// import { requireAuth } from "../../common/middleware/auth"; // uncomment to protect PUT
const router = express_1.default.Router();
/**
 * @openapi
 * components:
 *   schemas:
 *     Specialist:
 *       type: object
 *       properties:
 *         _id:
 *           type: string
 *           description: Specialist id (generated by Mongo)
 *         name:
 *           type: string
 *         title:
 *           type: string
 *         phone:
 *           type: string
 *         email:
 *           type: string
 *         bio:
 *           type: string
 *         order:
 *           type: integer
 *       required:
 *         - name
 *
 *     Phones:
 *       type: object
 *       properties:
 *         usa:
 *           type: string
 *         uk:
 *           type: string
 *         other:
 *           type: string
 *
 *     Contact:
 *       type: object
 *       properties:
 *         heading:
 *           type: string
 *           example: Contact Us
 *         subtitle:
 *           type: string
 *           example: CALL AN EXPERT — OUR SPECIALISTS ARE HERE TO ASSIST YOU
 *         phones:
 *           $ref: '#/components/schemas/Phones'
 *         email:
 *           type: string
 *           format: email
 *           example: info@asiliexplorer.com
 *         address:
 *           type: string
 *           example: Arusha, Tanzania
 *         specialists:
 *           type: array
 *           items:
 *             $ref: '#/components/schemas/Specialist'
 *         createdAt:
 *           type: string
 *           format: date-time
 *         updatedAt:
 *           type: string
 *           format: date-time
 *
 *   securitySchemes:
 *     bearerAuth:
 *       type: http
 *       scheme: bearer
 *       bearerFormat: JWT
 *
 * tags:
 *   - name: Contact
 *     description: Site contact info (singleton). GET public. PUT update (admin).
 */
/**
 * @openapi
 * /api/contact:
 *   get:
 *     summary: Get contact information
 *     tags:
 *       - Contact
 *     responses:
 *       "200":
 *         description: Contact document (or defaults if none created)
 *         content:
 *           application/json:
 *             schema:
 *               type: object
 *               properties:
 *                 data:
 *                   $ref: '#/components/schemas/Contact'
 *       "500":
 *         description: Server error
 */
router.get("/", contact_controller_1.getContactHandler);
/**
 * @openapi
 * /api/contact:
 *   put:
 *     summary: Create or update contact information (singleton)
 *     tags:
 *       - Contact
 *     security:
 *       - bearerAuth: []      # protect this endpoint; ensure your swagger security is wired
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             type: object
 *             properties:
 *               heading:
 *                 type: string
 *               subtitle:
 *                 type: string
 *               phones:
 *                 $ref: '#/components/schemas/Phones'
 *               email:
 *                 type: string
 *               address:
 *                 type: string
 *               specialists:
 *                 type: array
 *                 items:
 *                   $ref: '#/components/schemas/Specialist'
 *             example:
 *               heading: "Contact Us"
 *               subtitle: "CALL AN EXPERT — OUR SPECIALISTS ARE HERE TO ASSIST YOU"
 *               phones:
 *                 usa: "+255 0767140150"
 *                 uk: "+255 0767140150"
 *                 other: "Contact us for international numbers and local representatives in your region."
 *               email: "info@asiliexplorer.com"
 *               address: "Arusha, Tanzania"
 *               specialists:
 *                 - name: "Jane Doe"
 *                   title: "Senior Specialist"
 *                   phone: "+255 07xxxx"
 *                   email: "jane@example.com"
 *                   bio: "Expert in Tanzania tours"
 *                   order: 1
 *     responses:
 *       "200":
 *         description: Contact updated (returns the updated document)
 *         content:
 *           application/json:
 *             schema:
 *               type: object
 *               properties:
 *                 message:
 *                   type: string
 *                 data:
 *                   $ref: '#/components/schemas/Contact'
 *       "400":
 *         description: Validation error (e.g. specialists not an array)
 *       "401":
 *         description: Unauthorized (if bearerAuth checked)
 *       "500":
 *         description: Server error
 */
router.put("/", authMiddleware_1.authMiddleware, (0, roleMiddleware_1.roleMiddleware)("admin"), contact_controller_1.updateContactHandler);
exports.default = router;
